{"ast":null,"code":"import React,{useContext,useState,useRef}from'react';import Header from'./Header';import NoteContext from'../Context/NoteCotext';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(props){// blank\nconst[user,setUser]=useState({email:\"\",password:\"\"});// create refBtn\nconst refBtn=useRef('');// context data\nlet data=useContext(NoteContext);const{setLoggedUser}=data;//create navigate\nconst navigate=useNavigate('');// click on login button\nconst handleClick=async e=>{e.preventDefault();props.prog(30);refBtn.current.setAttribute('disabled','true');props.showAlert(\"plese Wait...!\",\"warning\");props.prog(60);// API call\nconst host=\"http://localhost:5000\";const response=await fetch(\"\".concat(host,\"/api/user/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:user.email,password:user.password})});props.prog(80);// console.log(\"prog>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\",prog);\nconst json=await response.json();console.log(json);if(json.flag){// save token and save state and then rederect ti view note\nlocalStorage.setItem('token',json.token);setLoggedUser(true);navigate(\"/View-Note\");refBtn.current.removeAttribute('disabled');props.showAlert(\"Acount login successfulliy\",\"success\");props.prog(100);}else{props.showAlert(\"Invalid Details\",\"danger\");refBtn.current.removeAttribute('disabled');}};// chenge form data\nconst onChenge=e=>{setUser({...user,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{title:\"Login\",desc:\"If you have account then login here.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row my-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-6 mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",name:\"email\",onChange:onChenge,value:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",name:\"password\",onChange:onChenge,value:user.password})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(\"button\",{ref:refBtn,disabled:user.email.length===0||user.password.length===0,className:\"btn btn-primary\",type:\"submit\",children:\"Login\"})})]})})})})})})]});}","map":{"version":3,"names":["React","useContext","useState","useRef","Header","NoteContext","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","props","user","setUser","email","password","refBtn","data","setLoggedUser","navigate","handleClick","e","preventDefault","prog","current","setAttribute","showAlert","host","response","fetch","concat","method","headers","body","JSON","stringify","json","console","log","flag","localStorage","setItem","token","removeAttribute","onChenge","target","name","value","children","title","desc","className","onSubmit","htmlFor","type","id","onChange","ref","disabled","length"],"sources":["C:/Users/admin/Desktop/Notes/my_note/src/Components/Login.js"],"sourcesContent":["import React,{ useContext , useState, useRef}  from 'react'\r\nimport Header from './Header'\r\nimport NoteContext from '../Context/NoteCotext'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nexport default function Login(props) {\r\n\r\n  \r\n  // blank\r\n  const [user, setUser] = useState({email:\"\", password:\"\"});\r\n\r\n  // create refBtn\r\n  const refBtn = useRef('');\r\n\r\n  // context data\r\n  let data = useContext(NoteContext);\r\n  const {setLoggedUser} = data;\r\n\r\n  //create navigate\r\n  const navigate = useNavigate('');\r\n\r\n\r\n  // click on login button\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    props.prog(30);\r\n    refBtn.current.setAttribute('disabled', 'true');\r\n    props.showAlert(\"plese Wait...!\" , \"warning\")\r\n    props.prog(60);\r\n    \r\n    // API call\r\n      const host = \"http://localhost:5000\";\r\n      const response = await fetch(`${host}/api/user/login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ email:user.email , password:user.password })\r\n\r\n      });\r\n      props.prog(80);\r\n      // console.log(\"prog>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\",prog);\r\n      const json = await response.json();\r\n      console.log(json)\r\n     \r\n      if(json.flag){\r\n        // save token and save state and then rederect ti view note\r\n        localStorage.setItem('token', json.token);\r\n        setLoggedUser(true);\r\n        navigate(\"/View-Note\");\r\n        refBtn.current.removeAttribute('disabled');\r\n        props.showAlert(\"Acount login successfulliy\" , \"success\")\r\n        props.prog(100)\r\n      }\r\n      else{\r\n        props.showAlert(\"Invalid Details\",\"danger\");\r\n        refBtn.current.removeAttribute('disabled'); \r\n      }\r\n  };\r\n\r\n  // chenge form data\r\n  const onChenge = (e) =>{\r\n    setUser({...user,[e.target.name]:e.target.value})\r\n  }\r\n\r\n  return (\r\n    <>\r\n        <Header title=\"Login\" desc=\"If you have account then login here.\"/>\r\n         {/* <h1>name: {mom.state.name} , sallary:{mom.state.sallary}</h1> */}\r\n        <div className=\"container\">\r\n        <div className=\"row my-4\">\r\n          <div className=\"col-6 mx-auto\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <form onSubmit={handleClick}>\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Email</label>\r\n                    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" name=\"email\" onChange={onChenge} value={user.email}/>\r\n                  </div>\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Password</label>\r\n                    <input type=\"password\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" name=\"password\" onChange={onChenge} value={user.password}/>\r\n                  </div>\r\n                  <div className=\"d-grid gap-2\">\r\n                      <button ref={refBtn} disabled={user.email.length === 0 || user.password.length === 0} className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}